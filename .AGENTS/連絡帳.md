# 連絡帳

人間に確認OKをもらえたら作業内容を3行程度にまとめてここに記載してください

2024-05-31 Codex
フェイズ1の環境をVite+React+Tailwindで再構築しました。
Hello World表示用のsrc/App.tsxとエントリーポイントを作成しました。
READMEにセットアップ手順を追記し、動作確認は未実施です。

2025-10-04 Codex
フェイズ2着手としてSVGベースの4x4盤面コンポーネントと初期盤面データを実装しました。
TailwindのPostCSS設定を整備し、盤面とレイアウトを中央寄せで表示できるよう調整しました。

2025-10-04 Codex
デザイン仕様を反映し、チェス駒を絵文字表示・Base/Jailレイアウトを調整し、盤面の角丸を廃止しました。

2025-10-04 Codex
フェイズ3としてGameManager導入と手番・選択・移動ロジックを実装し、UIを連動。tsconfig調整とスタブ追加でビルドも通る状態です。

2025-10-04 Codex
Wait概念を追加し、捕虜解放後の1ターン待機処理を実装。Wait表示用コンポーネントを追加してUIにも反映しました。

2025-10-04 Codex
ゲームルール変更に合わせて初期配置の黒白位置を入れ替えました。

2025-10-04 Codex
複数コマ選択用ポップアップを盤面端でも表示できるよう方向切替を実装。捕虜解放時は即座にBaseへ戻る仕様へWait周りのロジックを再調整しました。

2025-10-04 Codex
ポップアップを盤面オーバーレイで再描画し、淡い灰色の背景に変更することで視認性を改善しました。

2025-10-04 Codex
盤面進行ロジックをsrc/game/rules.tsへ分離し、GameManagerはUI制御に専念。AIからも利用しやすい純粋APIへ整理しました。

2025-10-04 Claude
王手回避ロジックを実装しました。isInCheck関数をrules.tsに追加し、evaluator.tsで王手時に±5000点のペナルティを適用。
GameAI.tsで王手がかかっている場合は王手を回避しない手を違法手として除外し、AIが必ず王手から逃げるようになりました。

2025-10-04 Claude
相互王手時に相手の王を取らない問題を修正。王手回避チェックで勝利する手を除外対象から外し、相手の王を取れる場合は優先するようにしました。
